# CopyBook №5

## struct of sequences

```c#
public struct A
        {
            public int ID { get; set; }
            public int Year_Of_Birth { get; set; }
            public string Street { get; set; }
        }

public struct B
        {
            public int Vendor_Code { get; set; }
            public string Category { get; set; }
            public string Country { get; set; }
        }

public struct C
        {
            public int ID{ get; set; }
            public int Shop_ID { get; set; }
            public int discount { get; set; }
        }

public struct D
        {
            public int Vendor_Code{ get; set; }
            public int Shop_ID{ get; set; }
            public int price { get; set; }
        }

public struct E
        {
            public int ID{ get; set; }
            public int Vendor_Code { get; set;}
            public int Shop_ID { get; set; }
        }
```

## 5.1

Даны последовательности A и C. Для каждого магазина определить потребителей, имеющих
максимальную скидку в этом магазине (вначале выводится название магазина, затем код потребителя, его год
рождения и значение максимальной скидки). Если для некоторого магазина имеется несколько потребителей
с максимальной скидкой, то вывести данные о потребителе с минимальным кодом. Сведения о каждом
магазине выводить на новой строке и упорядочивать по названиям магазинов в алфавитном порядке.

```c#
static void Main(string[] args)
    {
        List<A> users = new List<A>{
            new A { ID = 1, Year_Of_Birth = 2000, Street = "a" },
            new A { ID = 2, Year_Of_Birth = 2001, Street = "b" },
            new A { ID = 3, Year_Of_Birth = 2002, Street = "c" }
         };

        List<C> discounts = new List<C>{
            new C { ID = 1, Shop_ID = 1, discount = 10},
            new C { ID = 2, Shop_ID = 1, discount = 5},
            new C { ID = 3, Shop_ID = 1, discount = 2}
        };

        var result = discounts.GroupBy(
                        itemC => itemC.Shop_ID
                    ).Select(
                        groupC_by_shop_ID => groupC_by_shop_ID.MaxBy(
                            itemC => Tuple.Create(itemC.discount, itemC.ID)
                    )
                    ).OrderBy(itemC => itemC.Shop_ID).
                    Select(
                        itemC => $"{ itemC.Shop_ID
                                 }\t{ itemC.ID
                                 }\t{ users.FirstOrDefault(
                                        itemA => itemA.ID == itemC.ID
                                    , new A()).Year_Of_Birth
                                 }\t{ itemC.discount}"
                    );

                    foreach(var value in result)
                        Console.WriteLine(value);

    }
```

## 5.2

Даны последовательности A и C. Для каждого магазина и каждой улицы определить количество
потребителей, живущих на этой улице и имеющих скидку в этом магазине (вначале выводится название
магазина, затем название улицы, затем количество потребителей со скидкой). Если для некоторой пары
«магазин–улица» потребители со скидкой не найдены, то данные об этой паре не выводятся. Сведения о
каждой паре «магазин–улица» выводить на новой строке и упорядочивать по названиям магазинов в
алфавитном порядке, а для одинаковых названий магазинов — по названиям улиц (также в алфавитном
порядке)

```c#

```

## 5.3

Даны последовательности B и D. Для каждой категории товаров определить количество магазинов,
предлагающих товары данной категории, а также количество стран, в которых произведены товары данной
категории, представленные в магазинах (вначале выводится количество магазинов, затем название категории,
затем количество стран). Если для некоторой категории не найдено ни одного товара, представленного в
каком-либо магазине, то информация о данной категории не выводится. Сведения о каждой категории выводить на новой строке и упорядочивать по убыванию количества магазинов, а в случае одинакового количества — по названиям категорий в алфавитном порядке

```c#
static void Main(string[] args)
    {
        List<B> products_info = new List<B>{
            new B { Vendor_Code = 1, Category = "a", Country = "A" },
            new B { Vendor_Code = 2, Category = "b", Country = "B"},
            new B { Vendor_Code = 3, Category = "c", Country = "C" }
         };

        List<D> prices = new List<D>{
            new D { Vendor_Code = 1, Shop_ID = 1, price = 100 },
            new D { Vendor_Code = 2, Shop_ID = 2, price = 1321 },
            new D { Vendor_Code = 3, Shop_ID = 3, price = 1000 }
        };

        var _output =
                    products_info.GroupBy(
                        itemB => itemB.Category
                    ).Select(
                        groupB_by_Category => new {

                            shop_amount=prices.GroupBy(
                                    itemD => itemD.Shop_ID
                                ).Count(
                                    groupD_by_Shop_Id => groupD_by_Shop_Id.Count(
                                        itemD => products_info.Any(
                                            itemB => itemB.Vendor_Code == itemD.Vendor_Code
                                        )
                                    ) != 0
                                ),

                            Category=(groupB_by_Category.FirstOrDefault(new B())).Category,

                            country_amount=groupB_by_Category.Count()
                        }

                    ).OrderBy(
                        _item => _item.shop_amount
                    ).ThenBy(
                        _item => _item.Category
                    ).ThenBy(
                        _item => _item.country_amount

                    ).Select(
                        _item => $"{_item.shop_amount
                                }\t{_item.Category
                                }\t{_item.country_amount
                                }"
                    );
        foreach(var _value in _output)
            Console.WriteLine(_value);
    }
```

## 5.4

Даны последовательности D и E. Для каждого товара определить количество покупок данного товара
и максимальную цену покупки (вначале выводится количество покупок, затем артикул товара, затем
максимальная цена покупки). Если некоторый товар ни разу не был продан, то информация об этом товаре не
выводится. Сведения о каждом товаре выводить на новой строке и упорядочивать по возрастанию количества
покупок, а в случае одинакового количества — по артикулам товаров в алфавитном порядке

```c#

```

## 5.5

Даны последовательности A, B и E. Для каждого года рождения из A определить страну, в которой
было произведено максимальное количество товаров, приобретенных потребителями этого года рождения
(вначале выводится год, затем название страны, затем максимальное количество покупок). Если для
некоторой пары «год–страна» отсутствует информация о проданных товарах, то эта пара не обрабатывается
(в частности, если потребители некоторого года рождения не сделали ни одной покупки, то информация об
этом годе не выводится). Если для какого-либо года рождения имеется несколько стран с наибольшим числом
приобретенных товаров, то выводятся данные о первой из таких стран (в алфавитном порядке). Сведения о
каждом годе выводить на новой строке и упорядочивать по убыванию номера года

```c#

```

## 5.6

Даны последовательности A, D и E. Для каждой улицы проживания и каждого магазина, указанного
в E, определить суммарную стоимость покупок в данном магазине, сделанных всеми потребителями,
живущими на данной улице (вначале выводится название улицы, затем название магазина, затем суммарная
стоимость покупок). Если для некоторой пары «улица–магазин» отсутствует информация о проданных
товарах, то в качестве суммарной стоимости выводится 0. Сведения о каждой паре «улица–магазин» выводить
на новой строке и упорядочивать по названиям улиц в алфавитном порядке, а для одинаковых названий улиц
— по названиям магазинов (также в алфавитном порядке).

```c#

```

## 5.7

Даны последовательности A, C, D и E. Для каждого артикула товара, указанного в E, и каждой улицы
проживания определить суммарный размер скидки на изделия данного артикула, приобретенные
потребителями, живущими на данной улице (вначале выводится артикул товара, затем название улицы, затем
суммарный размер скидки). При вычислении размера скидки на товар копейки отбрасываются. Если на
проданный товар скидка отсутствует, то ее размер полагается равным 0. Если для некоторой пары «товар–
улица» отсутствует информация о приобретенных товарах, то данные об этой паре не выводятся. Если для
некоторой пары «товар–улица» все изделия были приобретены без скидок, то в качестве суммарной скидки
для этой пары выводится 0. Сведения о каждой паре «товар–улица» выводить на новой строке и
упорядочивать по артикулам товаров в алфавитном порядке, а для одинаковых артикулов — по названиям
улиц (также в алфавитном порядке).

```c#

```

## 5.8

Даны последовательности B, C, D и E. Для каждой страны-производителя и каждого потребителя
определить суммарную стоимость (с учетом скидки) всех товаров, произведенных в данной стране и
приобретенных этим потребителем (вначале выводится название страны, затем код потребителя, затем
суммарная стоимость с учетом скидки). При вычислении размера скидки на товар копейки отбрасываются.
Если на проданный товар скидка отсутствует, то ее размер полагается равным 0. Если для некоторой пары
«страна–потребитель» данные о покупках отсутствуют, то информация об этой паре не выводится. Сведения
о каждой паре «страна–потребитель» выводить на новой строке и упорядочивать по названиям стран в
алфавитном порядке, а для одинаковых названий стран — по возрастанию кодов потребителей.

```c#

```
